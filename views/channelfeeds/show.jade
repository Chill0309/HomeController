extends ../layout

block javascriptincludes
  link(rel='stylesheet', href='/js/nvd3/src/nv.d3.css')
  script(type="text/javascript", src="/js/nvd3/lib/d3.v2.js")
  script(type="text/javascript", src="/js/nvd3/nv.d3.js")
  script(type="text/javascript", src="/js/nvd3/src/tooltip.js")
  script(type="text/javascript", src="/js/nvd3/src/utils.js")
  script(type="text/javascript", src="/js/nvd3/src/models/legend.js")
  script(type="text/javascript", src="/js/nvd3/src/models/axis.js")
  script(type="text/javascript", src="/js/nvd3/src/models/scatter.js")
  script(type="text/javascript", src="/js/nvd3/src/models/line.js")
  script(type="text/javascript", src="/js/nvd3/src/models/lineWithFocusChart.js")
  script(type="text/javascript", src="/js/chartdata.js")

block content
  div(id="feedinfo", feedid="#{id}")
  h1 #{item.name}
  h3 Most Recent Value:
  div
    p(id="lastvalue")
      | #{item.lastvalue} 
      | #{item.units}
    p(id="lastupdated", class="datecell", timeoffset="0", isotime="#{new Date()}") 
      | Unknown

  div(id="chart")
    svg(style="width: 800px; height: 500px;")

  if item.units == "W"
    h3 Average Daily Usage:
    p #{averageValue} W
    p Â£#{energyCost} / month

  div(id="summarychart")
    svg(style="width: 800px; height: 300px;")